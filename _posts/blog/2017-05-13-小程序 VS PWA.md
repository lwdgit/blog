---
title: 小程序 VS PWA
---

小程序与PWA的PK更像是中国队与美国队的PK。这场较量由美国率先发起，上场便是美国最伟大的公司Google, 而中国队派出的则是中国市值最高的互联网公司腾讯。

PWA立足于Chrome是Android用户的主要入口，及欧美用户不喜欢安装App,而是更喜欢浏览网页的习惯之上。

小程序立足在自己强大的流量入口上，以及微信强大的用户黏性上。

<!--more-->


## Round1: 入口

微信算是小程序最大的优势，手握大量的流量入口。有微信公众号及各种微商做为前身，微信像各类中小厂商及个人体会了微信的强大力量。小程序出现之前，虽然有各类的H5平台活跃于微信内，因为能力限制，H5始终没法和微信紧密结合。如登录，注册等。小程序利用了平台的力量，将各种微信自有的能力暴露给开发者，将各种服务打包，极大减少了开发成本。

PWA虽然是基于w3c的系列规范，但也私藏了一些Google的私货，如消息推送。与微信相比，Google的入口就是Chrome浏览器了（Pixle直接将Chrome和桌面融合在一起）。这也是Google力推PWA的动力源。在Google的一些show case中，我们的确可以找到不少如App般顺滑的PWA网页应用。Google的另一大入口就是搜索，为了推广PWA，Google承诺给体验更好的网站更多的曝光机会。

## Round2: 生态

显然双方都在此注入了很多心血，虽然双方都因为小果公司的不合作进行了妥协。微信小程序显然更像一个mini版的应用市场，虽然迫于苹果压力做了让步，但是因为技术体系的落后，导致开发者无法很好地形成一个友好的开发生态。Google的PWA的重心显然不在应用市场上，这与其定位不无关系。另一原因是对于网页而言，搜索引擎反而比应用市场重要。在开发生态上，Google可以利用现有前端生态，在其上添砖加瓦即可。


## Round3: 开发体验

微信小程序的入手难度相对来说不高，配套的编辑器自带一整套的编译流程外带函数智能提示及Debug功能。Api文档不是特别友好，不过好在Demo比较全，摸索一下还是能够很快上手，学习曲线很低。当然，唯一需要转变过来的是观念问题，小程序不是H5，所以没有浏览器的Api，只保留了JS的基础方法和微信拓展的Api。因为不是浏览器上执行，所以解析html你也得手动实现或者依赖三方解析库（ps：不支持node_modules算是一大败笔）。
PWA对开发人员没有能力上的要求，也不强求程序猿用什么方式去实现，但却提出了一系列规范和细节增强。如添加到首屏，Materia UI，离线缓存及消息推送等。这一系列的东西对绝大多数前端来说是闻所未闻的事情，所以学习这些新概念也是一个不小的负担。其次因为H5在移动端性能表现较差，所以也对性能进行了把关。在现在js框架越来越重的情况下，完成一项全面的性能优化也不是一件简单的事。目前看来，PWA在这方面还有一段较长路要走。

## Round4: 使用体验

### 启动

在安卓机（Mi4c下），首次打开微信小程序大概用了8s钟，原因是首次要启动微信，其次loading也加载了大概3-4s钟。第二次因为少了微信启动，所以速度就快了很多（3-4s钟）。PWA启动速度比较平均，每次都只要3-5s左右，等待时也是以友好的类App首屏形式程现，所以感观上的等待很小。

### 交互形式

微信内置转场动画，所以在切到新页面时更像App，而PWA需要开发者自行开发（如果产生跨页面跳转时则很难模拟）。

### 兼容性

目前H5在浏览器端的兼容性可以说很糟糕。一方面是浏览器分化的引起，另一方面是前端技术更新太快所致。Google的猪队友水果公司也不太乐意配合，这也让Google自己感到头疼，目前H5的兼容性问题堪比ie6时代，这也是为什么绝大多数h5网站做得很简陋的原因之一。目前微信在安卓下用的是腾迅自己开发的X5内核来渲染，这就可以解决掉不少安卓机奇奇怪怪的兼容性问题。IOS下因为浏览器内核限制，估计Safari该有的bug都还有（尚未进行真机实测）。


## Round5: 安全性

H5还有一道越不过的坎就是安全性。虽然Google推PWA的同时强推了https，但是目前还是不够。ps:目前H5的安全性一般都全靠后端保证，虽然前端也要注意。当Google相推app shell时，安全问题一下就被提上日程了。H5的代码基本就是裸奔状态，任何放在浏览器里面执行的逻辑都可以用很低成本破解。微信小程序虽然有先天优势，但依旧进行了深层次把关。如只允许调用通过安全审核的接口。

## Round6: 用户黏性

对于这一点，我丝毫不怀疑腾讯的能力。微信小程序虽然做了很多妥协，但是诸如附近的小程序，分享，搜索添加到桌面及扫二维码打开等，这些能力依旧被小程序渗透很深。从某种意义上说，小程序已经超越了程序的范畴，其较强的自传播属性是传统App所不具有的。小程序可以和聊天集成，所以用户在聊天时就可以直接将小程序分享给对方。
PWA本身是基于浏览器的能力，而浏览器需要考虑的问题较多，如用户隐私问题。所以它没有办法越权去做一些事情。PWA更多的关注还是在体验上，至于渗透到用户的日常生活中去，则不是它关注的重点。

## Round7: 开放性

相比只能运行在微信里面的小程序而言，没有平台黏性的PWA，显示占据着H5与生俱来的开放性。一般而言，开放性的东西可以不断进化，所以往往更持久。这点目前js的发展已经是论证。但这也不表示不开放就无法长久发展，关键还是看微信的发展方向。

## Round8: 能力及可拓展性

目前看来，PWA唯一有优势的是后台运行及离线访问能力，并且这些功能暂时只有chrome/firefox这种积极进取的浏览器才支持。别的能力诸如摄像，振动，陀螺仪等目前能力相对较弱，这点微信借助其封闭环境可以轻松做到，所以在能力及其可拓展性上，微信可以更容易做到。



本站PWA版本及小程序版本均以上线。

PWA入口: https://lwdgit.github.io
小程序入口: 微信搜索 `夜第七章` 即可

![](https://static.dingtalk.com/media/lADPACOG8z7VPy3NAvvNBBk_1049_763.jpg_620x10000q90g.jpg)
其中左边是小程序的图标，右边是PWA的图标

以下为小程序版本:
![](https://static.dingtalk.com/media/lALPACOG8z7VPzvNB4DNBDg_1080_1920.png_620x10000q90g.jpg)


以下为PWA版本:
![](https://static.dingtalk.com/media/lALPACOG8z7VPzzNB4DNBDg_1080_1920.png_620x10000q90g.jpg)






